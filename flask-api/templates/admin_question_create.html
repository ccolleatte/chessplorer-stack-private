<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Nouvelle question - Chessplorer</title>
  
  <style>
    /* Design System Chessplorer - Variables CSS */
    :root {
      --color-brandPrimary: #236a68;
      --color-brandSecondary: #c0872b;
      --color-bg: #0d2832;
      --color-surface: #efe2c8;
      --color-textOnDark: #efe2c8;
      --color-textOnLight: #0d2832;
      --color-accent: #1c5a56;
      --color-success: #4caf50;
      --color-warning: #ffc107;
      --color-error: #d9534f;
      
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --font-sans: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      --elev-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      --elev-md: 0 4px 10px rgba(0,0,0,.12);
      --elev-lg: 0 12px 24px rgba(0,0,0,.18);
    }
    
    /* Reset et base */
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: var(--font-sans);
      background: linear-gradient(135deg, var(--color-bg) 0%, #0a1f29 100%);
      color: var(--color-textOnDark);
      margin: 0;
      padding: var(--space-lg);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: linear-gradient(145deg, var(--color-surface) 0%, #f5e8ca 100%);
      color: var(--color-textOnLight);
      padding: var(--space-xl);
      border-radius: var(--radius-lg);
      box-shadow: var(--elev-lg);
      position: relative;
      overflow: hidden;
    }
    
    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--color-brandPrimary), var(--color-brandSecondary), var(--color-accent));
    }
    
    h1 {
      color: var(--color-brandPrimary);
      margin-bottom: var(--space-lg);
      font-weight: 700;
      font-size: 2.2em;
      display: flex;
      align-items: center;
      gap: var(--space-md);
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .chess-icon {
      color: var(--color-brandSecondary);
      font-size: 1.1em;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .form-section {
      margin-bottom: var(--space-xl);
      padding: var(--space-lg);
      background: rgba(255, 255, 255, 0.6);
      border-radius: var(--radius-md);
      border-left: 4px solid var(--color-accent);
      box-shadow: var(--elev-sm);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .form-section:hover {
      transform: translateY(-2px);
      box-shadow: var(--elev-md);
    }
    
    .form-section h3 {
      color: var(--color-brandPrimary);
      margin: 0 0 var(--space-md) 0;
      font-size: 1.3em;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .form-group {
      margin-bottom: var(--space-lg);
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
    }
    
    @media (min-width: 768px) {
      .form-row {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    label {
      display: block;
      color: var(--color-textOnLight);
      font-weight: 500;
      margin-bottom: var(--space-xs);
      font-size: 0.95em;
    }
    
    input[type="text"],
    input[type="number"],
    textarea {
      width: 100%;
      padding: var(--space-md);
      border: 2px solid #ddd;
      border-radius: var(--radius-md);
      font-size: 1em;
      font-family: var(--font-sans);
      background: rgba(255, 255, 255, 0.9);
      color: var(--color-textOnLight);
      transition: all 0.3s ease;
    }
    
    input[type="text"]:focus,
    input[type="number"]:focus,
    textarea:focus {
      outline: none;
      border-color: var(--color-brandPrimary);
      background: white;
      box-shadow: 0 0 0 3px rgba(35, 106, 104, 0.1);
      transform: translateY(-1px);
    }
    
    input[type="text"]:hover,
    input[type="number"]:hover,
    textarea:hover {
      border-color: var(--color-accent);
    }
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .supporting-text {
      font-size: 0.85em;
      color: #666;
      margin-top: var(--space-xs);
      font-style: italic;
    }
    
    .level-responses {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-md);
    }
    
    @media (min-width: 1024px) {
      .level-responses {
        grid-template-columns: 1fr 1fr 1fr;
      }
    }
    
    .level-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%);
      padding: var(--space-md);
      border-radius: var(--radius-md);
      border-top: 4px solid var(--color-brandSecondary);
      box-shadow: var(--elev-sm);
      transition: all 0.2s ease;
    }
    
    .level-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--elev-md);
    }
    
    .level-card h4 {
      margin: 0 0 var(--space-sm) 0;
      color: var(--color-brandPrimary);
      font-size: 1em;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: var(--space-xs);
    }
    
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-md);
      margin-top: var(--space-xl);
      align-items: center;
      justify-content: flex-start;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--color-brandPrimary) 0%, var(--color-accent) 100%);
      color: white;
      border: none;
      padding: var(--space-md) var(--space-xl);
      border-radius: var(--radius-md);
      font-size: 1.1em;
      font-weight: 600;
      font-family: var(--font-sans);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: var(--elev-sm);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--elev-md);
      background: linear-gradient(135deg, #2a7a78 0%, #1f6b67 100%);
    }
    
    .btn-primary:active {
      transform: translateY(0);
      box-shadow: var(--elev-sm);
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--color-accent);
      border: 2px solid var(--color-accent);
      padding: calc(var(--space-md) - 2px) calc(var(--space-xl) - 2px);
      border-radius: var(--radius-md);
      font-size: 1em;
      font-weight: 500;
      font-family: var(--font-sans);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: var(--color-accent);
      color: white;
      transform: translateY(-1px);
    }
    
    .flash-messages {
      margin-bottom: var(--space-lg);
    }
    
    .flash-error {
      background: linear-gradient(135deg, var(--color-error) 0%, #c94744 100%);
      color: white;
      padding: var(--space-md);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-sm);
      box-shadow: var(--elev-sm);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .flash-error::before {
      content: '⚠️';
      font-size: 1.2em;
    }
    
    .back-link {
      color: var(--color-accent);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      font-weight: 500;
      padding: var(--space-sm) 0;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
    }
    
    .back-link:hover {
      border-bottom-color: var(--color-accent);
      transform: translateX(-4px);
    }
    
    .divider {
      margin-top: var(--space-xl);
      border-top: 1px solid rgba(0,0,0,0.1);
      padding-top: var(--space-md);
    }
    
    /* Animation d'entrée */
    .container {
      animation: slideIn 0.6s ease-out;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .form-section {
      animation: fadeInUp 0.4s ease-out forwards;
      opacity: 0;
    }
    
    .form-section:nth-child(2) { animation-delay: 0.1s; }
    .form-section:nth-child(3) { animation-delay: 0.2s; }
    .form-section:nth-child(4) { animation-delay: 0.3s; }
    .form-section:nth-child(5) { animation-delay: 0.4s; }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <span class="chess-icon">♛</span>
      Ajouter une nouvelle question
    </h1>
    
    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages">
          {% for message in messages %}
            <div class="flash-error">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="post">
      <!-- Section principale -->
      <div class="form-section">
        <h3><span class="chess-icon">♔</span> Question principale</h3>
        
        <div class="form-group">
          <label for="texte">Texte de la question</label>
          <textarea 
            id="texte"
            name="texte"
            rows="4"
            required
            placeholder="Posez votre question sur les échecs de manière claire"></textarea>
          <div class="supporting-text">Formulez une question précise et compréhensible</div>
        </div>
        
        <div class="form-group">
          <label for="reponse">Réponse générale</label>
          <textarea 
            id="reponse"
            name="reponse"
            rows="3"
            placeholder="Réponse principale à la question"></textarea>
          <div class="supporting-text">Réponse de base, avant spécialisation par niveau</div>
        </div>
      </div>

      <!-- Section classification -->
      <div class="form-section">
        <h3><span class="chess-icon">♖</span> Classification</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="niveau_min">Niveau minimum</label>
            <input 
              type="number" 
              id="niveau_min"
              name="niveau_min"
              placeholder="1200">
            <div class="supporting-text">ELO minimum recommandé</div>
          </div>
          
          <div class="form-group">
            <label for="niveau_max">Niveau maximum</label>
            <input 
              type="number" 
              id="niveau_max"
              name="niveau_max"
              placeholder="1800">
            <div class="supporting-text">ELO maximum pertinent</div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="theme">Thème principal</label>
            <input 
              type="text" 
              id="theme"
              name="theme"
              placeholder="Ouverture, tactique, finale...">
            <div class="supporting-text">Catégorie principale de la question</div>
          </div>
          
          <div class="form-group">
            <label for="subtheme">Sous-thème</label>
            <input 
              type="text" 
              id="subtheme"
              name="subtheme"
              placeholder="Précision du thème">
            <div class="supporting-text">Spécialisation du thème principal</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="source">Source</label>
          <input 
            type="text" 
            id="source"
            name="source"
            placeholder="Livre, auteur, vidéo...">
          <div class="supporting-text">Origine de la question ou de la réponse</div>
        </div>
      </div>

      <!-- Section réponses par niveau -->
      <div class="form-section">
        <h3><span class="chess-icon">♕</span> Réponses adaptées par niveau</h3>
        
        <div class="level-responses">
          <div class="level-card">
            <h4>🥉 Débutant (0-1200)</h4>
            <textarea 
              name="reponses_0_1200"
              rows="3"
              placeholder="Explication simple et accessible"></textarea>
            <div class="supporting-text">Réponse adaptée aux débutants</div>
          </div>
          
          <div class="level-card">
            <h4>🥈 Intermédiaire (1200-1600)</h4>
            <textarea 
              name="reponses_1200_1600"
              rows="3"
              placeholder="Explication détaillée avec nuances"></textarea>
            <div class="supporting-text">Réponse avec plus de détails techniques</div>
          </div>
          
          <div class="level-card">
            <h4>🥇 Avancé (1600+)</h4>
            <textarea 
              name="reponses_1600_plus"
              rows="3"
              placeholder="Explication experte et complète"></textarea>
            <div class="supporting-text">Réponse technique et approfondie</div>
          </div>
        </div>
      </div>

      <!-- Section métadonnées -->
      <div class="form-section">
        <h3><span class="chess-icon">♗</span> Métadonnées</h3>
        
        <div class="form-group">
          <label for="aliases">Aliases</label>
          <textarea 
            id="aliases"
            name="aliases"
            rows="2"
            placeholder="Variantes de la question (séparées par ; ou saut de ligne)"></textarea>
          <div class="supporting-text">Autres façons de poser la même question</div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="style_tag">Tags de style</label>
            <input 
              type="text" 
              id="style_tag"
              name="style_tag"
              placeholder="tactique, stratégie, débutant">
            <div class="supporting-text">Tags séparés par des virgules</div>
          </div>
          
          <div class="form-group">
            <label for="tonalite">Tonalité</label>
            <input 
              type="text" 
              id="tonalite"
              name="tonalite"
              placeholder="Formelle, amicale, technique...">
            <div class="supporting-text">Style de communication souhaité</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="validated_by">Validée par</label>
          <input 
            type="text" 
            id="validated_by"
            name="validated_by"
            placeholder="Nom du validateur">
          <div class="supporting-text">Personne ayant validé cette question</div>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="button-group">
        <button type="submit" class="btn-primary">
          <span class="chess-icon">💾</span>
          Enregistrer la question
        </button>
        
        <a href="/admin/questions" class="btn-secondary">
          <span class="chess-icon">↩️</span>
          Retour à la liste
        </a>
      </div>
    </form>

    <div class="divider">
      <a href="/admin/questions" class="back-link">
        ← Retour à la liste des questions
      </a>
    </div>
  </div>
</body>
</html>