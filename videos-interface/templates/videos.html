{% extends "base.html" %}

{% block title %}Vid√©os ‚Äì Chessplorer{% endblock %}

{% block content %}
<h2>Liste des vid√©os</h2>

<form method="get" action="{{ url_for('list_videos') }}">
    <label for="source_id">Filtrer par compte source :</label>
    <select name="source_id" id="source_id" onchange="this.form.submit()">
        <option value="">‚Äî Toutes les sources ‚Äî</option>
        {% for source in sources %}
            <option value="{{ source.id }}" {% if selected_source == source.id|string %}selected{% endif %}>
                {{ source.nom }}
            </option>
        {% endfor %}
    </select>
</form>

<table>
    <thead>
        <tr>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Score</th>
            <th>YouTube</th>
            <th>D√©tail</th>
        </tr>
    </thead>
    <tbody>
        {% for video in videos %}
            <tr>
                <td>{{ video.titre }}</td>
                <td>{{ video.auteur_nom or '‚Äì' }}</td>
                <td>{{ '%.2f'|format(video.score_utilite or 0) }}</td>
                <td>
                    <a class="video-icon" href="https://www.youtube.com/watch?v={{ video.youtube_id }}" target="_blank" title="Voir sur YouTube">üì∫</a>
                </td>
                <td>
                    <a class="video-icon" href="{{ url_for('zoom_video', id=video.id) }}" title="Voir d√©tails">üîç</a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{% if not videos %}
    <p>Aucune vid√©o √† afficher pour cette source.</p>
{% endif %}
{% endblock %}
